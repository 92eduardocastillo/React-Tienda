(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{36:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(30),s=n.n(r),o=(n(36),n(7)),i=Object(c.createContext)(),l=n(4),d="[auth] login",j="[auth] logout",b={logged:!1,email:"",localId:"",idToken:""},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inicialState:b},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},t.payload),{},{logged:!0});case j:return{logged:!1};default:return e}},m=n(11),h=n(2),p=n(17),x=n(0),O=function(e){var t=e.isAuthenticated,n=e.component,c=Object(p.a)(e,["isAuthenticated","component"]);return Object(x.jsx)(h.b,Object(l.a)(Object(l.a)({},c),{},{component:function(e){return t?Object(x.jsx)(n,Object(l.a)({},e)):Object(x.jsx)(h.a,{to:"/login"})}}))},f=function(e){var t=e.isAuthenticated,n=e.component,c=Object(p.a)(e,["isAuthenticated","component"]);return Object(x.jsx)(h.b,Object(l.a)(Object(l.a)({},c),{},{component:function(e){return t?Object(x.jsx)(h.a,{to:"/"}):Object(x.jsx)(n,Object(l.a)({},e))}}))},v=function(){var e=Object(c.useContext)(i),t=e.user,n=e.dispatch,a=Object(h.g)(),r=function(){a.replace("/login"),n({type:j})};return Object(x.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(x.jsx)("div",{className:"navbar-collapse",children:Object(x.jsxs)("div",{className:"navbar-nav",children:[Object(x.jsx)(m.b,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/productos",children:"Productos"}),Object(x.jsx)(m.b,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/administrador",children:"Administrador"}),Object(x.jsx)("span",{className:"nav-item nav-link text-info",children:t.email?t.email:""}),Object(x.jsx)("button",{className:"nav-item nav-link btn",onClick:r,children:"Logout"})]})}),Object(x.jsx)("div",{className:"navbar-collapse",children:Object(x.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("span",{className:"nav-item nav-link text-info",children:t.email?t.email:""}),Object(x.jsx)("button",{className:"nav-item nav-link btn",onClick:r,children:"Logout"})]})})]})},g=n(5),N=n.n(g),y=n(12),w=n(13),k=n.n(w),S=n(16),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1],s=function(){r(e)},i=function(e){var t=e.target;r(Object(l.a)(Object(l.a)({},a),{},Object(S.a)({},t.name,t.value)))};return[a,i,s]};function I(e){var t=e.producto,n=e.Eliminar,c=t.nombre,a=t.id;return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("h1",{children:c}),Object(x.jsx)("h3",{children:a}),Object(x.jsx)("button",{onClick:function(){return n(a)},className:"btn btn-secondary",children:"Eliminar"})]})}var P=function(){var e=Object(y.a)(N.a.mark((function e(t){var n,c,a,r,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://tienda-1-72bd6-default-rtdb.firebaseio.com/tienda",n="".concat("https://tienda-1-72bd6-default-rtdb.firebaseio.com/tienda","/productos.json?auth=").concat(t),e.prev=2,e.next=5,k()(n);case 5:return c=e.sent,e.next=8,c.data;case 8:return a=e.sent,r=Object.entries(a||{}),console.log("array\n"+r),s=r.map((function(e){return e[1].id=e[0],e[1]})),e.abrupt("return",s);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();function A(){var e=JSON.parse(localStorage.getItem("user")).idToken,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=C({searchText:""}),i=Object(o.a)(s,2),l=i[0],d=i[1],j=l.searchText,b=function(){P(e).then((function(e){return r(e)}))},u=function(){var t=Object(y.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.delete("".concat("https://tienda-1-72bd6-default-rtdb.firebaseio.com/tienda","/productos/").concat(n,".json?auth=").concat(e)).then(b()).catch((function(e){return console.log("mal")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){return b()}),[]);var m=Object(c.useMemo)((function(){return function(e,t){return""!==e&&t?(console.log("filkter"),t.filter((function(t){return t.nombre.toLowerCase().includes(e.toLowerCase())}))):(console.log(e),console.log(t),t)}(j,a)}),[j,a]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Productos"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(x.jsx)("input",{type:"text",className:"form-control",name:"searchText",value:j,onChange:d}),Object(x.jsx)("button",{className:"btn btn-primary",children:"Buscar"})]}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"card-columns animate__animated animate__fadeIn",children:m?m.map((function(e,t){return Object(x.jsx)(I,{producto:e,Eliminar:u},t)})):Object(x.jsx)("div",{children:"NO hay Productos"})})]})}var T=function(e){e.history;var t=JSON.parse(localStorage.getItem("user")),n=t.idToken,c=(t.localId,"https://tienda-1-72bd6-default-rtdb.firebaseio.com/tienda/productos.json?auth=".concat(n)),a=C({nombre:""}),r=Object(o.a)(a,2),s=r[0],i=r[1],l=s.nombre;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Administrador"}),Object(x.jsx)("hr",{}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k.a.post(c,s).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},children:[Object(x.jsx)("input",{type:"text",className:"form-control",name:"nombre",value:l,onChange:i}),Object(x.jsx)("button",{className:"btn btn-primary",children:"Agregar"})]})]})},E=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{}),Object(x.jsx)("div",{className:"container mt-2",children:Object(x.jsxs)(h.d,{children:[Object(x.jsx)(h.b,{exact:!0,path:"/productos",component:A}),Object(x.jsx)(h.b,{exact:!0,path:"/administrador",component:T}),Object(x.jsx)(h.a,{to:"/productos"})]})})]})},L="AIzaSyDZQeK314I5UNLfvPqnxUV4RAk33oM2fdg",D=function(){var e=Object(y.a)(N.a.mark((function e(t,n){var c,a,r,s,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword","?key=").concat(L),e.prev=1,e.next=4,k.a.post(c,t);case 4:return a=e.sent,e.next=7,a.data;case 7:r=e.sent,s=r.email,o=r.localId,i=r.idToken,console.log("Logueado"),n({type:d,payload:{email:s,localId:o,idToken:i}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("No se Logueo");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(e){e.history;var t=Object(c.useContext)(i).dispatch,n=C({email:"",password:"",returnSecureToken:!0}),a=Object(o.a)(n,2),r=a[0],s=a[1],l=r.email,d=r.password;return Object(x.jsxs)("div",{className:"container col-xl-10 col-xxl-8 px-4 py-1",children:[Object(x.jsx)("div",{className:"row align-items-center g-lg-5 py-1",children:Object(x.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("h1",{children:"Welcome to Store"}),Object(x.jsx)("button",{className:"btn btn-link ",children:"Registrarse"})]}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),D(r,t)},className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",name:"email",value:l,onChange:s}),Object(x.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",name:"password",value:d,onChange:s}),Object(x.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(x.jsx)("div",{className:"checkbox mb-3",children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})}),Object(x.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Log in"}),Object(x.jsx)("hr",{className:"my-4"}),Object(x.jsx)("small",{className:"text-muted",children:"By clicking Sign up, you agree to the terms of use."})]})]})}),Object(x.jsx)("a",{href:"file:///C:/Users/GOMA%20Elettronica%20SPA/Desktop/d.pdf",children:" fgwrewe"})]})},R=function(e){e.history;var t=Object(c.useContext)(i).dispatch,n=C({email:"",password:"",returnSecureToken:!0}),a=Object(o.a)(n,2),r=a[0],s=a[1],l=r.email,j=r.password,b=function(){var e=Object(y.a)(N.a.mark((function e(n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,D(r);case 3:c=e.sent,console.log(c),!0===c.registered&&t({type:d,payload:{name:c.email}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"container col-xl-10 col-xxl-8 px-4 py-1",children:Object(x.jsx)("div",{className:"row align-items-center g-lg-5 py-1",children:Object(x.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("h1",{children:"Welcome to Store"}),Object(x.jsx)("button",{className:"btn btn-link ",children:"Registrarse"})]}),Object(x.jsxs)("form",{onSubmit:b,className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",name:"email",value:l,onChange:s}),Object(x.jsx)("label",{for:"floatingInput",children:"Email address"})]}),Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",name:"password",value:j,onChange:s}),Object(x.jsx)("label",{for:"floatingPassword",children:"Password"})]}),Object(x.jsx)("div",{className:"checkbox mb-3",children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})}),Object(x.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Log in"}),Object(x.jsx)("hr",{className:"my-4"}),Object(x.jsx)("small",{className:"text-muted",children:"By clicking Sign up, you agree to the terms of use."})]})]})})})},B=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"container mt-2",children:Object(x.jsxs)(h.d,{children:[Object(x.jsx)(h.b,{exact:!0,path:"/login",component:J}),Object(x.jsx)(h.b,{exact:!0,path:"/sinup",component:R}),Object(x.jsx)(h.a,{to:"/login"})]})})})},F=function(){var e=Object(c.useContext)(i).user;return Object(x.jsx)(m.a,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(h.d,{children:[Object(x.jsx)(f,{exact:!0,path:"/login",component:B,isAuthenticated:e.logged}),Object(x.jsx)(O,{path:"/",component:E,isAuthenticated:e.logged})]})})})},M=function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}},_=function(){var e=Object(c.useReducer)(u,{},M),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n))}),[n]),Object(x.jsx)(i.Provider,{value:{user:n,dispatch:a},children:Object(x.jsx)(F,{})})};n(65);s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(_,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.04680026.chunk.js.map